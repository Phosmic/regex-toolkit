name: Set up Conda environment
description: Set up Conda environment
inputs:
  environment-file:
    description: Conda environment file to use.
    default: environment.yml
  environment-name:
    description: Name to use for the Conda environment.
    default: test

runs:
  using: composite
  steps:
    - name: Install ${{ inputs.environment-file }}
      uses: mamba-org/setup-micromamba@v1
      with:
        micromamba-version: '2.0.2-0'
        channels: conda-forge
        environment-file: ${{ inputs.environment-file }}
        environment-name: ${{ inputs.environment-name }}
        condarc-file: ci/condarc.yml
        init-shell: bash
        cache-environment: true
        post-cleanup: 'all'
